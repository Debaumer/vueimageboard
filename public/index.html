<!doctype html>
<html>
<body>
    <head>
        <link rel="stylesheet" href="/css/master.css">
        <link rel="stylesheet" href="/css/modal.css">
        <meta charset="utf-8">
        <title>J board</title>
    </head>
    <div id="app">
     <h1>{{heading}}</h1>
     <button v-on:click="showstate">showstate</button>
     <div v-if="modal.show ==true" style="bottom: 5%; left: 50%; margin: auto; position: absolute">
         <modal-wrap
         v-if="modal.show == true"
         v-bind:id="modal.id"
         v-on:closemodal="hide"

         v-bind:url="items[modal.index].url"
         v-bind:title="items[modal.index].title"
         v-bind:username="items[modal.index].username"
         v-bind:description="items[modal.index].description"
         v-bind:timestamp="items[modal.index]['created_at']"
         v-model:comments="comments"

         v-model:newcomment="comment.comment"
         v-model:newcommentuser="comment.username"

         v-on:insertcomment="insertcomment"
         v-on:modalmount="getcomments">
     </modal-wrap>
     <form style="z-index: 10000; position:  relative">
         <input type="text" placeholder="username">
    </form>
    </div>
      <form id="uploadForm" method="POST">
          <label for="title">Title</label>
            <input type="text" v-model="form.title">

          <label for="description">Description:</label>
            <input name="descritption" v-model="form.description">

          <label for="username">Username:</label>
            <input name="username" v-model="form.username">

          <label for="image">Image upload</label>
          <input name="image" type="file" accepts="image/*" @change="getImg">

          <button @click="upload">upload image</button>
      </form>

    <section id="board" v-if="items.length > 0">
        <div class="card" v-for="item in items">
            <h1>{{item["created_at"]}}</h1>
            <img-wrap
            v-on:openmodal="show($event)"
            v-bind:id="item.id"
            v-bind:title="item.title"
            v-bind:username="item.username"
            v-bind:description="item.description"
            v-bind:url="item.url"
            >
            </img-wrap>
        </div>
    </section>
</div>

<script id="img-wrap" type="text/x-template">
    <div>
        <h1>{{title}}</h1>
        <p>{{description}}</p>
        <h4>Posted by: {{username}}</h4>
        <img v-on:click="openmodal" class="cardImg" v-bind:src="url">
    </div>
</script>

<script id="modal-wrap" type="text/x-template">
        <div id="modal" v-on:click.self.prevent="closemodal($event)">
            <div id="block">
                <h1 v-on:click.stop="closemodal($event)">X</h1>
                <h1>{{title}}</h1>
                <h4>Posted by {{username}} at {{timestamp}}</h4>
                <p>{{description}}</p>
                <img id="blockImage" v-bind:alt="title" v-bind:src="url">
                <form method="post" id="flexCol" v-on:submit.prevent="insertcomment">
                    <label for="username">Username:</label>
                    <input name="username">
                    <label for="comment" >Comment:</label>
                    <textarea id="comment" name="comment"></textarea>
                    <input type="submit" value="post comment">
                </form>
                <h1>Comments</h1>
                <section id="comments" v-for="item in comments">
                    <div class="commentCard">
                        <h1>{{item.username}}</h1>
                        <p>{{item.comment}}</p>
                    </div>
                </section>
            </div>
        </div>
</script>

</body>
</html>

<script src="/js/axios.min.js"></script>
<script src="/js/vue.js"></script>
<script src="/js/script.js"></script>
